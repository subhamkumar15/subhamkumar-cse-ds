<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Expense Tracker (Simple)</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;background:#f2f2f2;margin:0;padding:20px}
    h1{margin:0 0 10px}
    .box{background:#fff;padding:12px;border:1px solid #ccc;max-width:900px}
    label{display:block;margin:8px 0 4px}
    input,select,textarea{width:100%;padding:8px;border:1px solid #bbb}
    textarea{min-height:60px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .btns{margin:10px 0;display:flex;gap:8px}
    button{padding:8px 12px;border:1px solid #555;background:#eee;cursor:pointer}
    table{width:100%;border-collapse:collapse;margin-top:10px}
    th,td{border:1px solid #ccc;padding:8px;text-align:left}
    tfoot td{font-weight:700}
  </style>
</head>
<body>
  <div class="box">
    <h1>Expense Tracker</h1>
    <form id="form">
      <label>Expense Name</label>
      <input id="name" placeholder="Groceries">
      <div class="row">
        <div>
          <label>Amount (₹)</label>
          <input id="amount" type="number" step="0.01" min="0">
        </div>
        <div>
          <label>Date</label>
          <input id="date" type="date">
        </div>
      </div>
      <label>Category</label>
      <select id="category">
        <option>General</option>
        <option>Groceries</option>
        <option>Transport</option>
        <option>Dining</option>
        <option>Utilities</option>
      </select>
      <label>Description</label>
      <textarea id="desc" placeholder="Small note..."></textarea>
      <div class="btns">
        <button id="add" type="submit">Add</button>
        <button id="clear" type="button">Clear Form</button>
      </div>
      <small id="msg" style="color:#d33"></small>
    </form>
    <div class="row" style="margin:10px 0">
      <div>
        <label>Search</label>
        <input id="search" placeholder="type to filter">
      </div>
      <div>
        <label>&nbsp;</label>
        <button id="export" type="button">Export CSV</button>
      </div>
    </div>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Amount</th>
          <th>Category</th>
          <th>Description</th>
          <th>Date</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="body">
        <tr><td colspan="6" style="text-align:center">No data</td></tr>
      </tbody>
      <tfoot>
        <tr>
          <td>Total</td>
          <td id="total">₹0.00</td>
          <td colspan="4"></td>
        </tr>
      </tfoot>
    </table>
  </div>
  <script>
    var rows=[];var STORAGE_KEY='simple-expense-rows-v1';
    function $(id){return document.getElementById(id);}function today(){return new Date().toISOString().slice(0,10);}function load(){try{rows=JSON.parse(localStorage.getItem(STORAGE_KEY))||[]}catch(e){rows=[]}}function save(){localStorage.setItem(STORAGE_KEY,JSON.stringify(rows))}function numberToMoney(n){var x=Number(n||0);return '₹'+x.toFixed(2)}
    function escapeHtml(s){return String(s||'').replace(/[&<>"']/g,function(c){return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[c]});}
    function render(){var body=$('body');body.innerHTML='';var q=($('search').value||'').toLowerCase();var total=0;if(rows.length===0){var tr=document.createElement('tr');tr.innerHTML='<td colspan="6" style="text-align:center">No data</td>';body.appendChild(tr)}else{for(var i=0;i<rows.length;i++){var r=rows[i];var text=(r.name+' '+(r.desc||'')+' '+(r.category||'')).toLowerCase();if(q&&text.indexOf(q)===-1)continue;total+=Number(r.amount||0);var tr2=document.createElement('tr');tr2.innerHTML='<td>'+escapeHtml(r.name)+'</td>'+'<td>'+numberToMoney(r.amount)+'</td>'+'<td>'+escapeHtml(r.category||'')+'</td>'+'<td>'+escapeHtml(r.desc||'')+'</td>'+'<td>'+r.date+'</td>'+'<td>'+'<button data-i="'+i+'" data-act="edit">Edit</button> '+'<button data-i="'+i+'" data-act="del">Delete</button>'+'</td>';body.appendChild(tr2)}if(body.children.length===0){var tr3=document.createElement('tr');tr3.innerHTML='<td colspan="6" style="text-align:center">No match</td>';body.appendChild(tr3)}}$('total').textContent=numberToMoney(total).replace('₹','₹')}
    document.addEventListener('DOMContentLoaded',function(){load();$('date').value=today();render();$('form').addEventListener('submit',function(e){e.preventDefault();var name=$('name').value.trim();var amount=Number($('amount').value||0);var date=$('date').value;var cat=$('category').value;var desc=$('desc').value.trim();if(!name||!date||amount<=0){$('msg').textContent='Please enter name, positive amount and date.';return}$('msg').textContent='';rows.push({name:name,amount:amount,date:date,category:cat,desc:desc});save();e.currentTarget.reset();$('date').value=today();render()});$('clear').addEventListener('click',function(){$('form').reset();$('date').value=today();$('msg').textContent='' });$('body').addEventListener('click',function(e){var t=e.target;if(t.tagName!=='BUTTON')return;var i=Number(t.getAttribute('data-i'));var act=t.getAttribute('data-act');if(isNaN(i))return;if(act==='del'){rows.splice(i,1);save();render()}else if(act==='edit'){var r=rows[i];$('name').value=r.name;$('amount').value=r.amount;$('date').value=r.date;$('category').value=r.category||'General';$('desc').value=r.desc||'';rows.splice(i,1);save();render()}});$('search').addEventListener('input',render);$('export').addEventListener('click',function(){var csv='Name,Amount,Category,Description,Date\n';for(var i=0;i<rows.length;i++){var r=rows[i];csv+=['"'+r.name.replace(/"/g,'""')+'"',r.amount,'"'+(r.category||'').replace(/"/g,'""')+'"','"'+(r.desc||'').replace(/"/g,'""')+'"',r.date].join(',')+'\n'}var blob=new Blob(["\ufeff"+csv],{type:'text/csv;charset=utf-8;'});var url=URL.createObjectURL(blob);var a=document.createElement('a');a.href=url;a.download='expenses.csv';a.click();URL.revokeObjectURL(url)})});
  </script>
</body>
</html>